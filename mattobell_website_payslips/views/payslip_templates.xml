<odoo>
  <template id="no_employee">
    <t t-call="website.layout">
      <div class="container mt-5">
        <h3>No employee record is linked to your user.</h3>
        <p>Please contact your HR administrator.</p>
      </div>
    </t>
  </template>

  <template id="payslip_list_template" name="Employee Payslips">
    <t t-call="website.layout">
      <div class="container mt-4">
        <t t-if="request.env['ir.config_parameter'].sudo().get_param('mattobell.show_logo','1')=='1'">
          <t t-set="logo_path">/mattobell_website_payslips/static/src/img/company_logo.png</t>
          <t t-if="logo_path">
            <img t-att-src="logo_path" style="height:60px;" alt="Company logo" />
          </t>
        </t>
        <h2 class="mt-3">My Payslips</h2>

        <form method="get" class="row mb-4 mt-3">
          <div class="col-md-3">
            <label>Month</label>
            <select name="month" class="form-select">
              <option value="">All</option>
              <t t-foreach="range(1,13)" t-as="m">
                <option t-att-value="m" t-att-selected="m == selected_month"><t t-esc="m"/></option>
              </t>
            </select>
          </div>
          <div class="col-md-3">
            <label>Year</label>
            <select name="year" class="form-select">
              <option value="">All</option>
              <t t-foreach="range(2020,2031)" t-as="y">
                <option t-att-value="y" t-att-selected="y == selected_year"><t t-esc="y"/></option>
              </t>
            </select>
          </div>
          <div class="col-md-3 d-flex align-items-end">
            <button class="btn btn-primary w-100">Apply Filters</button>
          </div>
        </form>

        <t t-if="payslips">
          <div class="row">
            <t t-foreach="payslips" t-as="slip">
              <div class="col-md-4 mb-3">
                <div class="card p-3 h-100">
                  <h5 class="mb-1"><t t-esc="slip.number or 'Payslip'"/></h5>
                  <p class="mb-1"><small>Period: <t t-esc="slip.date_from"/> â†’ <t t-esc="slip.date_to"/></small></p>
                  <div class="mt-2">
                    <a t-att-href="'/payslips/%s/download' % slip.id" class="btn btn-sm btn-primary">Download PDF</a>
                  </div>
                  <t t-if="attachments.get(slip.id) and len(attachments.get(slip.id))">
                    <small class="text-muted mt-2 d-block">Attachments:</small>
                    <ul class="small">
                      <t t-foreach="attachments[slip.id]" t-as="att">
                        <li><a t-att-href="'/web/content/%s?model=ir.attachment&amp;field=datas&amp;filename_field=name&amp;download=1' % att.id"><t t-esc="att.name"/></a></li>
                      </t>
                    </ul>
                  </t>
                </div>
              </div>
            </t>
          </div>
        </t>
        <t t-if="not payslips">
          <div class="alert alert-info">No payslips found for the selected period.</div>
        </t>
      </div>
    </t>
  </template>
</odoo>
